From 10d5d465f1138d98015bda3bc14e2041a80604ff Mon Sep 17 00:00:00 2001
From: Rajnish-Dashora <rajnish_dashora@mckinsey.com>
Date: Mon, 23 May 2016 10:35:24 +0700
Subject: [PATCH] react-storybook setup configurations

---
 .storybook/config.js         | 10 +++++++++
 .storybook/webpack.config.js | 48 ++++++++++++++++++++++++++++++++++++++++++++
 karma.conf.js                |  5 ++++-
 package.json                 |  5 ++++-
 4 files changed, 66 insertions(+), 2 deletions(-)
 create mode 100644 .storybook/config.js
 create mode 100644 .storybook/webpack.config.js

diff --git a/.storybook/config.js b/.storybook/config.js
new file mode 100644
index 0000000..6e758b0
--- /dev/null
+++ b/.storybook/config.js
@@ -0,0 +1,10 @@
+import { configure } from '@kadira/storybook';
+
+const req = require.context('../test/components/', true, /\-story\.js/);
+
+function loadStories() {
+	 req.keys().forEach(req);
+}
+
+configure(loadStories, module);
+
diff --git a/.storybook/webpack.config.js b/.storybook/webpack.config.js
new file mode 100644
index 0000000..5986983
--- /dev/null
+++ b/.storybook/webpack.config.js
@@ -0,0 +1,48 @@
+const path = require('path');
+var webpack = require('webpack');
+// Setup our plugins.
+var plugins = [
+  new webpack.DefinePlugin({
+    __ENV__: JSON.stringify(process.env.NODE_ENV || 'dev')
+  })
+];
+module.exports = {
+  module: {
+    loaders: [
+      {
+      	test: /\.scss/,
+      	loader: 'style!css!autoprefixer!sass?outputStyle=expanded',
+        include: path.resolve(__dirname, '../')
+      },{
+      test: /\.css$/,
+      exclude: [/\.raw\.css$/, /\.useable\.css$/, /node_module/],
+      loader: 'style!css!autoprefixer',
+        include: path.resolve(__dirname, '../')
+    }, {
+      test: /\.useable\.css$/,
+      loader: 'style/useable!raw!autoprefixer',
+        include: path.resolve(__dirname, '../')
+    }, {
+      test: /\.raw\.css$/,
+      loader: 'style!raw!autoprefixer',
+        include: path.resolve(__dirname, '../')
+    }, {
+      test: /\.(gif|png|jpg)$/,
+      loader: 'url?limit=8192',
+        include: path.resolve(__dirname, '../')
+    }, {
+      // handle woff web-fonts, for the custom TSEL iconfonts
+      test: /\.woff(2)?(\?v=[0-9]\.[0-9]\.[0-9])?$/,
+      loader: "url-loader?limit=10000&minetype=application/font-woff",
+        include: path.resolve(__dirname, '../')
+    }, {
+      // handle other supported web-fonts, for the custom TSEL iconfonts
+      test: /\.(otf|ttf|eot|svg)(\?v=[0-9]\.[0-9]\.[0-9])?$/,
+      loader: "file-loader",
+        include: path.resolve(__dirname, '../')
+    },
+    ]
+  },
+  plugins: plugins
+
+}
diff --git a/karma.conf.js b/karma.conf.js
index 306d68d..42e6bfe 100644
--- a/karma.conf.js
+++ b/karma.conf.js
@@ -38,7 +38,10 @@ module.exports = function(config) {
         ],
         loaders: [{
           test: /\.(js|jsx)$/,
-          exclude: /node_modules/,
+          exclude: [
+          	/node_modules/,
+          	/\-story\.js/
+          ],
           loader: 'babel-loader'
         }, {
           // this loader will transpile and inject your SCSS
diff --git a/package.json b/package.json
index bd4c0df..9787f37 100644
--- a/package.json
+++ b/package.json
@@ -18,7 +18,8 @@
     "android": "./scripts/build/android.sh",
     "ios": "./scripts/build/ios.sh",
     "plugin-add": "cd Cordova/ && cordova plugin add --save --shrinkwrap",
-    "plugin-rm": "cd Cordova/ && cordova plugin rm --save --shrinkwrap"
+    "plugin-rm": "cd Cordova/ && cordova plugin rm --save --shrinkwrap",
+    "storybook": "start-storybook -p 9001"
   },
   "repository": {
     "type": "git",
@@ -67,6 +68,7 @@
     "swipe-js-iso": "^2.0.3"
   },
   "devDependencies": {
+    "@kadira/storybook": "^1.27.0",
     "autoprefixer-loader": "^3.1.0",
     "babel-core": "5.8.22",
     "babel-eslint": "^4.0.10",
@@ -125,6 +127,7 @@
     "url-loader": "~0.5.6",
     "webpack": "~1.11.0",
     "webpack-dev-server": "~1.10.1",
+    "webpack-hot-middleware": "^2.10.0",
     "xcode": "^0.8.2",
     "xml-loader": "^1.0.0"
   }
-- 
2.6.4 (Apple Git-63)

